#!/usr/bin/python3

import os
import subprocess
import time

import schedule

from pick_wp import pick_wallpaper


if __name__ == '__main__':
    pick_wallpaper(os.environ['WPDIR'])
    schedule.every(20).minutes.do(lambda: pick_wallpaper(os.environ['WPDIR']))

    subprocess.run("battery-monitor.sh")

    while True:
        schedule.run_pending()
        time.sleep(20)
